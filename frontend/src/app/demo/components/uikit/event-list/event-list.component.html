<div class="filter-selector-container">
  <label for="eventType">Filtrer par type :</label>
  <select id="eventType" [(ngModel)]="selectedEventType" (change)="loadEvents()">
    <option value="">-- Tous --</option>
    <option *ngFor="let type of eventTypes" [value]="type">{{ type }}</option>
  </select>
</div>

<div class="incident-grid">
  <div class="incident-card" *ngFor="let event of events" [class.expanded]="expandedEventId === event.id">
    <h5>{{ getDisplayEventType(event.eventType) }}</h5>
    <p><strong>Horaire prévue :</strong> {{ event.scheduledTime }}</p>
    <p><strong>Horaire fictif :</strong> {{ event.fictionalTime }}</p>
    
    <div class="additional-info" *ngIf="expandedEventId === event.id">
      <p><strong>Type d'événement :</strong> {{ event.eventType }}</p>
      <p><strong>Date de création :</strong> {{ event.dateCreationEvent | date:'dd/MM/yyyy HH:mm' }}</p>
    </div>
    
    <div class="btn-group">
      <button class="btn-icon" (click)="viewEvent(event.id)">
        <img src="assets/layout/images/vision.png" alt="View" />
      </button>
<button class="btn-icon" (click)="openUpdateModal(event)">
  <img src="assets/layout/images/editer.png" alt="Edit" />
</button>

      <button class="btn-icon" (click)="deleteEvent(event.id)">
        <img src="assets/layout/images/supprimer.png" alt="Delete" />
      </button>
    </div>
  </div>
<div class="modal-backdrop" *ngIf="showUpdateModal">
  <div class="modal-content">
    <h3 class="modal-title">Modifier Événement</h3>
    <form [formGroup]="updateForm" (ngSubmit)="saveUpdatedEvent()" class="modal-form">
      
      <div class="form-group">
        <label for="eventType">Type d'événement</label>
        <select id="eventType" formControlName="eventType" class="form-control">
          <option *ngFor="let type of eventTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="scheduledTime">Horaire prévue</label>
        <input id="scheduledTime" type="time" formControlName="scheduledTime" class="form-control" />
      </div>

      <div class="form-group">
        <label for="fictionalTime">Horaire fictif</label>
        <input id="fictionalTime" type="time" formControlName="fictionalTime" class="form-control" />
      </div>

      <div class="modal-actions">
        <button type="submit" class="btn-primary" [disabled]="updateForm.invalid">Sauvegarder</button>
        <button type="button" class="btn-secondary" (click)="showUpdateModal=false">Annuler</button>
      </div>

    </form>
  </div>
</div>

</div>
