<div class="filter-selector-container">
  <label for="metier">Rechercher par Métier :</label>
  <input 
    type="text" 
    id="metier" 
    [(ngModel)]="searchMetier" 
    placeholder="Ex: Finance, IT, RH..." />

  <button (click)="filterByMetier()">Filtrer</button>
</div>
<div class="mise-en-prod-grid">
  <div class="mise-en-prod-card" *ngFor="let item of list" [class.expanded]="expandedProdId === item.idProd">
    <h5>Mise En Production</h5>
    <p><strong>Module/Application:</strong> {{ item.application }}</p>
    <div class="additional-info" *ngIf="expandedProdId === item.idProd">
    <p><strong>Métier:</strong> {{ item.metier }}</p>
    <p><strong>Date de création:</strong> {{ item.dateCreationProd | date:'dd/MM/yyyy HH:mm' }}</p>

    </div>

    <div class="btn-group">
      <button class="btn-icon" *ngIf="item.idProd !== undefined" (click)="viewProd(item.idProd!)">
        <img src="assets/layout/images/vision.png" alt="View" />
      </button>
<button class="btn-icon" *ngIf="item.idProd !== undefined" (click)="openUpdateModal(item)">
  <img src="assets/layout/images/editer.png" alt="Edit" />
</button>

      <button class="btn-icon" *ngIf="item.idProd !== undefined" (click)="deleteProd(item.idProd!)">
        <img src="assets/layout/images/supprimer.png" alt="Delete" />
      </button>
    </div>
  </div>
<div class="modal-backdrop" *ngIf="showUpdateModal">
  <div class="modal-content">
    <h3 class="modal-title" style="color: #28a745;">Modifier Mise En Prod</h3>
    <form [formGroup]="updateForm" (ngSubmit)="saveUpdatedProd()" class="modal-form">

      <div class="form-group">
        <label for="application">Application</label>
        <input id="application" type="text" formControlName="application" class="form-control" />
      </div>

      <div class="form-group">
        <label for="metier">Métier</label>
        <input id="metier" type="text" formControlName="metier" class="form-control" />
      </div>

      <div class="modal-actions">
        <button type="submit" class="btn-primary" [disabled]="updateForm.invalid">Sauvegarder</button>
        <button type="button" class="btn-secondary" (click)="showUpdateModal=false">Annuler</button>
      </div>
    </form>
  </div>
</div>
